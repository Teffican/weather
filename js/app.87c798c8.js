(function(){"use strict";var e={1796:function(e,t,n){var a=n(9242),s=n(3396);const r={class:"container"};function i(e,t,n,a,i,o){const c=(0,s.up)("Settings"),l=(0,s.up)("Search"),d=(0,s.up)("Weather"),u=(0,s.up)("Forecast"),p=(0,s.up)("Message");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(c),(0,s.Wm)(l),(0,s.Wm)(d),(0,s.Wm)(u),(0,s.Wm)(p)])}var o=n(7139);const c={key:0,class:"weather__loading"},l={class:"weather__inner"},d={class:"weather__city"},u={class:"weather__info"},p={class:"weather__temp"},h=["src"],g={class:"weather__desc"},m={class:"weather__desc-title"},_={class:"weather__desc-feels"},w={class:"weather__wind"};function f(e,t,n,a,r,i){const f=(0,s.up)("Spinner"),v=(0,s.up)("WeatherSlider");return e.isLoading?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(f)])):e.city?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,o.C_)(`weather weather__${e.weather.main}`)},[(0,s._)("div",l,[(0,s._)("div",d,(0,o.zw)(e.city),1),(0,s._)("div",u,[(0,s._)("div",p,(0,o.zw)(a.getTemp(e.weather.temp)),1),(0,s._)("img",{class:"weather__icon",src:`https://openweathermap.org/img/wn/${e.weather.icon}@2x.png`,alt:"Clouds"},null,8,h),(0,s._)("div",g,[(0,s._)("div",m,(0,o.zw)(a.capitalizeFirstChar(e.weather.description)),1),(0,s._)("div",_,[(0,s.Uk)((0,o.zw)(a.dict.weather.feelsLike[e.lang])+" ",1),(0,s._)("span",null,(0,o.zw)(a.getTemp(e.weather.tempFeels)),1)])])]),(0,s._)("div",w,(0,o.zw)(e.weather.wind)+" "+(0,o.zw)("°C"===e.temp?a.dict.weather.windUnits.metric[e.lang]:a.dict.weather.windUnits.imperial[e.lang]),1),(0,s.Wm)(v)])],2)):(0,s.kq)("",!0)}const v={class:"weather__carousel-time"},y=["src"],C={class:"weather__carousel-temp"};function L(e,t,n,a,r,i){const c=(0,s.up)("SplideSlide"),l=(0,s.up)("Splide");return(0,s.wg)(),(0,s.j4)(l,{class:"weather__carousel",options:r.options},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.list,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.dt,class:"weather__carousel-item"},{default:(0,s.w5)((()=>[(0,s._)("div",v,(0,o.zw)(i.getHours(e.dt))+":00 ",1),(0,s._)("img",{class:"weather__carousel-icon",src:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,alt:"Clouds"},null,8,y),(0,s._)("div",C,(0,o.zw)(a.getTemp(e.temp)),1)])),_:2},1024)))),128))])),_:1},8,["options"])}var b=n(874);const W=()=>e=>(e=Math.floor(e),e>0&&(e=`+${e}`),e+="°",e);var S=W,k={components:{Splide:b.tv,SplideSlide:b.jw},setup(){const e=S();return{getTemp:e}},data(){return{options:{perPage:15,pagination:!1,breakpoints:{840:{perPage:10},640:{perPage:5},390:{perPage:3}}}}},computed:{list(){return this.$store.state.hourlyWeather}},methods:{getHours(e){const t=new Date(1e3*e),n=t.getHours();return n.toString().length>1?n:`0${n}`}}},$=n(89);const T=(0,$.Z)(k,[["render",L]]);var z=T;const D=()=>e=>e.charAt(0).toUpperCase()+e.slice(1);var O=D;const j={class:"spinner"};function x(e,t,n,a,r,i){return(0,s.wg)(),(0,s.iD)("div",j)}var F={};const I=(0,$.Z)(F,[["render",x],["__scopeId","data-v-5489fba4"]]);var M=I,P=n(65),G=JSON.parse('{"months":[{"ru":"января","en":"january"},{"ru":"февраля","en":"february"},{"ru":"марта","en":"march"},{"ru":"апреля","en":"april"},{"ru":"мая","en":"may"},{"ru":"июня","en":"june"},{"ru":"июля","en":"july"},{"ru":"августа","en":"august"},{"ru":"сентября","en":"september"},{"ru":"октября","en":"october"},{"ru":"ноября","en":"nvember"},{"ru":"декабря","en":"december"}],"daysOfWeek":[{"ru":"Воскресенье","en":"Sunday"},{"ru":"Понедельник","en":"Monday"},{"ru":"Вторник","en":"Tuesday"},{"ru":"Среда","en":"Wednesday"},{"ru":"Четверг","en":"Thursday"},{"ru":"Пятница","en":"Friday"},{"ru":"Суббота","en":"Saturday"}],"weather":{"feelsLike":{"ru":"Ощущается как","en":"Feels like"},"windUnits":{"metric":{"ru":"м/с","en":"m/s"},"imperial":{"ru":"ми/ч","en":"mi/h"}}},"forecast":{"title":{"ru":"Прогноз на неделю","en":"Weekly forecast"},"day":{"ru":"Днём","en":"Day"},"night":{"ru":"Ночью","en":"Night"}},"search":{"placeholder":{"ru":"Укажите город","en":"Enter the city"}},"message":{"cityError":{"ru":"Город не найден","en":"City not found"}},"settings":{"title":{"ru":"Настройки","en":"Settings"}}}'),E={components:{WeatherSlider:z,Spinner:M},setup(){const e=S(),t=O(),n=G;return{getTemp:e,capitalizeFirstChar:t,dict:n}},computed:(0,P.rn)({weather:e=>e.currentWeather,city:e=>e.city,isLoading:e=>e.isLoading,lang:e=>e.lang.toLowerCase(),temp:e=>e.temp}),mounted(){const e=localStorage.getItem("city");e&&this.$store.dispatch("fetchGeoCode",e)}};const U=(0,$.Z)(E,[["render",f]]);var Z=U;const H={key:0,class:"forecast__loading"},N={key:1,class:"forecast"},q={class:"forecast__title"},K={class:"forecast__day-week"},R={class:"forecast__day-num"},A=["src"],B={class:"forecast__temp-day"},Y={class:"forecast__temp-night"},J={class:"forecast__desc"};function V(e,t,n,a,r,i){const c=(0,s.up)("Spinner"),l=(0,s.up)("SplideSlide"),d=(0,s.up)("Splide");return e.isLoading?((0,s.wg)(),(0,s.iD)("div",H,[(0,s.Wm)(c)])):e.city?((0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("div",q,(0,o.zw)(a.dict.forecast.title[e.lang]),1),(0,s.Wm)(d,{class:"forecast__list",options:r.options},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.list,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t,class:"forecast__item"},{default:(0,s.w5)((()=>[(0,s._)("div",K,(0,o.zw)(i.getDayName(t.dt)),1),(0,s._)("div",R,(0,o.zw)(i.getMonth(t.dt)),1),(0,s._)("img",{class:"forecast__icon",src:`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,alt:"Clouds"},null,8,A),(0,s._)("div",B,(0,o.zw)(a.dict.forecast.day[e.lang])+" "+(0,o.zw)(a.getTemp(t.temp.day)),1),(0,s._)("div",Y,(0,o.zw)(a.dict.forecast.night[e.lang])+" "+(0,o.zw)(a.getTemp(t.temp.night)),1),(0,s._)("div",J,(0,o.zw)(a.capitalizeFirstChar(t.weather[0].description)),1)])),_:2},1024)))),128))])),_:1},8,["options"])])):(0,s.kq)("",!0)}var Q={components:{Splide:b.tv,SplideSlide:b.jw,Spinner:M},setup(){const e=S(),t=O(),n=G;return{getTemp:e,capitalizeFirstChar:t,dict:n}},data(){return{options:{perPage:7,pagination:!1,arrows:!1,breakpoints:{950:{perPage:4,arrows:!0},610:{perPage:3},500:{perPage:2},400:{perPage:1}}}}},computed:(0,P.rn)({city:e=>e.city,list:e=>e.dailyWeather,isLoading:e=>e.isLoading,lang:e=>e.lang.toLowerCase()}),methods:{getDayName(e){const t=new Date(1e3*e).getDay(),n=this.$store.state.lang.toLowerCase(),a=G.daysOfWeek;return a[t][n]},getMonth(e){const t=new Date(1e3*e),n=t.getMonth(),a=t.getDate(),s=this.$store.state.lang.toLowerCase(),r=G.months;return`${a} ${r[n][s]}`}}};const X=(0,$.Z)(Q,[["render",V]]);var ee=X;const te={class:"search"},ne=["placeholder"],ae=["disabled"],se=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{d:"M23.809 21.646l-6.205-6.205c1.167-1.605 1.857-3.579 1.857-5.711 0-5.365-4.365-9.73-9.731-9.73-5.365 0-9.73 4.365-9.73 9.73 0 5.366 4.365 9.73 9.73 9.73 2.034 0 3.923-.627 5.487-1.698l6.238 6.238 2.354-2.354zm-20.955-11.916c0-3.792 3.085-6.877 6.877-6.877s6.877 3.085 6.877 6.877-3.085 6.877-6.877 6.877c-3.793 0-6.877-3.085-6.877-6.877z"})],-1),re=[se];function ie(e,t,n,r,i,o){return(0,s.wg)(),(0,s.iD)("div",te,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.search=e),class:"search__input",type:"text",placeholder:r.dict.search.placeholder[e.lang],onKeydown:t[1]||(t[1]=(0,a.D2)(((...e)=>o.fetchGeoCode&&o.fetchGeoCode(...e)),["enter"]))},null,40,ne),[[a.nr,i.search]]),(0,s._)("button",{class:"search__button",disabled:e.isLoading,onClick:t[2]||(t[2]=(...e)=>o.fetchGeoCode&&o.fetchGeoCode(...e))},re,8,ae)])}var oe={setup(){const e=G;return{dict:e}},data(){return{search:""}},computed:(0,P.rn)({isLoading:e=>e.isLoading,lang:e=>e.lang.toLowerCase()}),methods:{fetchGeoCode(){this.isLoading||this.$store.dispatch("fetchGeoCode",this.search)}}};const ce=(0,$.Z)(oe,[["render",ie]]);var le=ce;const de={class:"settings"},ue={ref:"dropdown",class:"settings__inner"},pe={class:"settings__item"},he={class:"settings__item"};function ge(e,t,n,a,r,i){return(0,s.wg)(),(0,s.iD)("div",de,[(0,s._)("div",ue,[(0,s._)("button",{class:"settings__button",onClick:t[0]||(t[0]=(...e)=>i.toggle&&i.toggle(...e))},(0,o.zw)(a.dict.settings.title[e.lang.toLowerCase()]),1),(0,s._)("div",{class:(0,o.C_)(["settings__dropdown",{active:r.isOpened}])},[(0,s._)("div",pe,[(0,s._)("button",{class:(0,o.C_)(["settings__item-btn",{active:"RU"===e.lang}]),onClick:t[1]||(t[1]=(...e)=>i.changeLang&&i.changeLang(...e))}," RU ",2),(0,s._)("button",{class:(0,o.C_)(["settings__item-btn",{active:"EN"===e.lang}]),onClick:t[2]||(t[2]=(...e)=>i.changeLang&&i.changeLang(...e))}," EN ",2)]),(0,s._)("div",he,[(0,s._)("button",{class:(0,o.C_)(["settings__item-btn",{active:"°C"===e.temp}]),onClick:t[3]||(t[3]=(...e)=>i.changeTemp&&i.changeTemp(...e))}," °C ",2),(0,s._)("button",{class:(0,o.C_)(["settings__item-btn",{active:"°F"===e.temp}]),onClick:t[4]||(t[4]=(...e)=>i.changeTemp&&i.changeTemp(...e))}," °F ",2)])],2)],512)])}var me={setup(){const e=G;return{dict:e}},data(){return{isOpened:!1}},computed:(0,P.rn)({lang:e=>e.lang,temp:e=>e.temp,city:e=>e.city}),mounted(){const e=this.$refs.dropdown;document.body.addEventListener("click",(t=>{t.path.includes(e)||(this.isOpened=!1)}))},methods:{toggle(){this.isOpened=!this.isOpened},changeLang(e){this.$store.commit("setLang",e.target.innerText),this.city&&this.$store.dispatch("fetchGeoCode",this.city)},changeTemp(e){this.$store.commit("setTemp",e.target.innerText),this.city&&this.$store.dispatch("fetchGeoCode",this.city)}}};const _e=(0,$.Z)(me,[["render",ge],["__scopeId","data-v-20d6de29"]]);var we=_e;const fe={class:"message"};function ve(e,t,n,a,r,i){return(0,s.wg)(),(0,s.iD)("div",fe)}var ye={};const Ce=(0,$.Z)(ye,[["render",ve]]);var Le=Ce,be={name:"App",components:{Weather:Z,Forecast:ee,Search:le,Settings:we,Message:Le}};const We=(0,$.Z)(be,[["render",i]]);var Se=We;const ke=()=>(e,t)=>{const n=document.getElementById("app"),a=document.createElement("div");a.classList.add("message",`message_${e}`),a.innerText=t,n.appendChild(a),setTimeout((()=>a.classList.add("message_active")),0),setTimeout((()=>a.classList.remove("message_active")),3e3),setTimeout((()=>n.removeChild(a)),4e3)};var $e=ke;const Te="9cfacd05ff5e58b49cb21dbf21e68c99",ze="http://api.openweathermap.org",De=$e(),Oe=G;var je=(0,P.MT)({state:{lang:localStorage.getItem("lang")??"RU",temp:localStorage.getItem("temp")??"°C",city:"",isLoading:!1,coordinates:{lat:0,lon:0},currentWeather:{temp:0,tempFeels:0,icon:"",description:"",wind:0,main:""},hourlyWeather:[],dailyWeather:[]},mutations:{setIsLoading(e,t){e.isLoading=t},setCity(e,t){const n=t[e.lang.toLowerCase()]??t;e.city=n,localStorage.setItem("city",n)},setCoordinates(e,t){e.coordinates=t},setCurrentWeather(e,t){e.currentWeather=t},setHourlyWeather(e,t){e.hourlyWeather=t},setDailyWeather(e,t){e.dailyWeather=t},setLang(e,t){e.lang=t,localStorage.setItem("lang",t)},setTemp(e,t){e.temp=t,localStorage.setItem("temp",t)}},actions:{fetchGeoCode(e,t){e.commit("setIsLoading",!0),fetch(`${ze}/geo/1.0/direct?q=${t}&appid=${Te}`).then((e=>e.json())).then((t=>{if(t.length)e.commit("setCity",t[0].local_names??t[0].name),e.commit("setCoordinates",{lat:t[0].lat,lon:t[0].lon}),e.dispatch("fetchWeather");else{const t=e.state.lang.toLocaleLowerCase();De("error",Oe.message.cityError[t])}})).finally((()=>e.commit("setIsLoading",!1)))},fetchWeather(e){e.commit("setIsLoading",!0);const t=e.state.coordinates.lat,n=e.state.coordinates.lon,a="°C"===e.state.temp?"metric":"imperial";fetch(`${ze}/data/2.5/onecall?lat=${t}&lon=${n}&exclude=minutely,alerts&units=${a}&lang=${e.state.lang}&appid=${Te}`).then((e=>e.json())).then((t=>{const n={temp:Math.floor(t.current.temp),tempFeels:Math.floor(t.current.feels_like),main:t.current.weather[0].main.toLowerCase(),description:t.current.weather[0].description,icon:t.current.weather[0].icon,wind:t.current.wind_speed};e.commit("setCurrentWeather",n),e.commit("setHourlyWeather",t.hourly.slice(0,24)),e.commit("setDailyWeather",t.daily.slice(1))})).finally((()=>e.commit("setIsLoading",!1)))}}});(0,a.ri)(Se).use(je).mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,s,r){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],r=e[d][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(o=!1,r<i&&(i=r));if(o){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,s,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,r,i=a[0],o=a[1],c=a[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var d=c(n)}for(t&&t(a);l<i.length;l++)r=i[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},a=self["webpackChunkweather"]=self["webpackChunkweather"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(1796)}));a=n.O(a)})();
//# sourceMappingURL=app.87c798c8.js.map